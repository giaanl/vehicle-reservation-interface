<div class="filter-modal" [class.show]="show">
  <div class="filter-overlay" (click)="onClose()"></div>
  <div class="filter-content">
    <div class="filter-header">
      <div class="header-left">
        <ng-icon name="heroMagnifyingGlass" class="search-icon-modal" />
        <h2>Filtros de Busca</h2>
      </div>
      <button class="close-btn" (click)="onClose()">
        <ng-icon name="heroXMark" />
      </button>
    </div>

    <div class="filter-actions">
      <button class="filter-action-btn" (click)="onClear()">Limpar</button>
    </div>

    <div class="filter-sections">
      <!-- Seção de Status (apenas para veículos) -->
      <div class="filter-section" *ngIf="showStatusFilter">
        <div class="filter-section-header" (click)="toggleSection('status')">
          <h3>Disponibilidade</h3>
          <ng-icon
            name="heroChevronRight"
            [class.rotated]="expandedSections['status']"
           />
        </div>
        <div class="filter-options" *ngIf="expandedSections['status']">
          <div class="status-buttons">
            <button
              *ngFor="let option of statusOptions"
              class="status-btn"
              [class.active]="localFilters.status === option.key"
              (click)="selectStatus(option.key)"
            >
              {{ option.label }}
            </button>
          </div>
        </div>
      </div>

      <div class="filter-section">
        <div class="filter-section-header" (click)="toggleSection('types')">
          <h3>Tipos de carrocerias</h3>
          <ng-icon
            name="heroChevronRight"
            [class.rotated]="expandedSections['types']"
           />
        </div>
        <div class="filter-options" *ngIf="expandedSections['types']">
          <div class="filter-grid">
            <label
              class="filter-checkbox"
              *ngFor="let option of typeOptions"
            >
              <input type="checkbox" [(ngModel)]="localFilters.types[option.key]" />
              <span>{{ option.label }}</span>
            </label>
          </div>
        </div>
      </div>

      <div class="filter-section">
        <div
          class="filter-section-header"
          (click)="toggleSection('engine')"
        >
          <h3>Tipos de motores</h3>
          <ng-icon
            name="heroChevronRight"
            [class.rotated]="expandedSections.engine"
           />
        </div>
        <div class="filter-options" *ngIf="expandedSections.engine">
          <div class="engine-buttons">
            <button
              *ngFor="let engine of engineOptions"
              class="engine-btn"
              [class.active]="localFilters.engine === engine"
              (click)="selectEngine(engine)"
            >
              Motor {{ engine }}
            </button>
          </div>
        </div>
      </div>

      <div class="filter-section">
        <div class="filter-section-header" (click)="toggleSection('size')">
          <h3>Quantidade de lugares</h3>
          <ng-icon
            name="heroChevronRight"
            [class.rotated]="expandedSections.size"
           />
        </div>
        <div class="filter-options" *ngIf="expandedSections.size">
          <div class="size-buttons">
            <button
              *ngFor="let size of sizeOptions"
              class="size-btn"
              [class.active]="localFilters.size === size"
              (click)="selectSize(size)"
            >
              {{ size < 10 ? '0' + size : size }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <button class="apply-filter-btn" (click)="onApply()">
      Aplicar Filtros
    </button>
  </div>
</div>
