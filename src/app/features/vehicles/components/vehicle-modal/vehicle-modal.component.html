<div class="vehicle-modal" [class.show]="show">
  <div class="modal-overlay" (click)="onClose()"></div>
  <div class="modal-content">
    <div class="modal-header">
      <div class="header-left">
        <ng-icon name="heroTruck" class="header-icon" />
        <h2>{{ title }}</h2>
      </div>
      <button class="close-btn" (click)="onClose()">
        <ng-icon name="heroXMark" />
      </button>
    </div>

    <form class="modal-body" (ngSubmit)="onSubmit()">
      <div class="form-sections">
        <div class="form-section">
          <div class="form-section-header">
            <h3>Informações Básicas</h3>
          </div>
          <div class="form-section-content">
            <div class="form-group">
              <label for="name">Nome do Veículo</label>
              <input
                type="text"
                id="name"
                [(ngModel)]="formData.name"
                name="name"
                placeholder="Ex: Versa"
                required
              />
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="year">Ano</label>
                <input
                  type="number"
                  id="year"
                  [(ngModel)]="formData.year"
                  name="year"
                  min="1990"
                  [max]="2027"
                  required
                />
              </div>

              <div class="form-group">
                <label for="type">Tipo</label>
                <select
                  id="type"
                  [(ngModel)]="formData.type"
                  name="type"
                  required
                >
                  <option value="">Selecione o tipo</option>
                  <option *ngFor="let type of vehicleTypes" [value]="type">
                    {{ type }}
                  </option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-header">
            <h3>Especificações</h3>
          </div>
          <div class="form-section-content">
            <div class="form-row">
              <div class="form-group">
                <label for="engine">Motor</label>
                <input
                  type="text"
                  id="engine"
                  [(ngModel)]="formData.engine"
                  name="engine"
                  placeholder="Ex: 2.0"
                  required
                />
              </div>

              <div class="form-group">
                <label for="size">Capacidade (Lugares)</label>
                <select
                  id="size"
                  [(ngModel)]="formData.size"
                  name="size"
                  required
                >
                  <option *ngFor="let size of sizeOptions" [value]="size">
                    {{ size }}
                  </option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-actions">
        @if (isEditing) {
          <a class="delete-link" (click)="onDelete()">
            <ng-icon name="heroTrash" />
            Excluir veículo
          </a>
        }
        <div class="actions-right">
          <button type="button" class="btn btn-secondary" (click)="onClose()">
            Cancelar
          </button>
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="!isFormValid()"
          >
            {{ isEditing ? "Salvar Alterações" : "Criar Veículo" }}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
