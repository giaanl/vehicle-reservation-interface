<app-main-layout>
  <div class="vehicles-container">
    <div class="search-section">
      <div class="search-input-wrapper">
        <ng-icon name="heroMagnifyingGlass" class="search-icon" />
        <input
          type="text"
          class="search-input"
          placeholder="Buscar veículo"
          [ngModel]="searchQuery()"
          (ngModelChange)="onSearchChange($event)"
        />
      </div>
      <button class="filter-button" (click)="toggleFilterModal()">
        <ng-icon name="heroAdjustmentsHorizontal" />
        Filtrar
      </button>
      <button class="btn-new" (click)="openCreateModal()">
        <ng-icon name="heroPlus" />
        Novo Veículo
      </button>
    </div>

    <div class="vehicles-section">
      <h3 class="section-title">Lista de veículos</h3>
      <div class="reservations-grid">
        @for (vehicle of vehiclesWithImage(); track vehicle.id) {
          <app-vehicle-card
            [vehicle]="vehicle"
            [showEditButton]="true"
            (editClick)="openEditModal($event)"
          />
        }
      </div>

      @if (vehiclesWithImage().length === 0) {
        <div class="empty-state">
          <ng-icon name="heroTruck" />
          <h3>Nenhum veículo encontrado</h3>
          <p>Adicione seu primeiro veículo clicando no botão acima.</p>
        </div>
      }
    </div>
  </div>
</app-main-layout>

<app-vehicle-modal
  [show]="showModal()"
  [vehicle]="selectedVehicle()"
  (close)="closeModal()"
  (save)="onSaveVehicle($event)"
  (delete)="openDeleteModal()"
/>

<app-filter-modal
  [show]="showFilterModal()"
  [filters]="filters()"
  [showAvailabilityFilter]="true"
  (close)="toggleFilterModal()"
  (apply)="applyFilters($event)"
  (clear)="clearFilters()"
/>

<app-confirm-modal
  [show]="showDeleteModal()"
  [title]="'Excluir veículo'"
  [message]="
    'Tem certeza que deseja excluir o veículo <strong>' +
    (vehicleToDelete()?.name || '') +
    '</strong>? Esta ação é <strong>irreversível</strong>.'
  "
  [confirmText]="'Sim, excluir'"
  [cancelText]="'Cancelar'"
  [type]="'danger'"
  (confirm)="confirmDelete()"
  (cancel)="closeDeleteModal()"
/>
